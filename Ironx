
local correctKey = "TER"


local KeyGui = Instance.new("ScreenGui")
KeyGui.Name = "IRON_HUB_Key"
KeyGui.Parent = game:GetService("CoreGui")

local KeyFrame = Instance.new("Frame")
KeyFrame.Size = UDim2.new(0,300,0,120)
KeyFrame.Position = UDim2.new(0.5,-150,0.5,-60)
KeyFrame.BackgroundColor3 = Color3.fromRGB(30,30,30)
KeyFrame.BorderSizePixel = 0
KeyFrame.Parent = KeyGui

local KeyLabel = Instance.new("TextLabel")
KeyLabel.Size = UDim2.new(1,0,0,40)
KeyLabel.Position = UDim2.new(0,0,0,0)
KeyLabel.BackgroundTransparency = 1
KeyLabel.Text = "Enter Key to use IRON HUB"
KeyLabel.TextColor3 = Color3.fromRGB(255,255,255)
KeyLabel.TextScaled = true
KeyLabel.Parent = KeyFrame

local KeyBox = Instance.new("TextBox")
KeyBox.Size = UDim2.new(0,200,0,30)
KeyBox.Position = UDim2.new(0.5,-100,0,50)
KeyBox.ClearTextOnFocus = false
KeyBox.PlaceholderText = "Enter Key..."
KeyBox.Text = ""
KeyBox.TextColor3 = Color3.fromRGB(255,255,255)
KeyBox.BackgroundColor3 = Color3.fromRGB(50,50,50)
KeyBox.Parent = KeyFrame

local EnterBtn = Instance.new("TextButton")
EnterBtn.Size = UDim2.new(0,80,0,30)
EnterBtn.Position = UDim2.new(0.5,-40,0,90)
EnterBtn.BackgroundColor3 = Color3.fromRGB(100,100,100)
EnterBtn.Text = "Enter"
EnterBtn.TextColor3 = Color3.fromRGB(255,255,255)
EnterBtn.Parent = KeyFrame


EnterBtn.MouseButton1Click:Connect(function()
    if KeyBox.Text == correctKey then
        
        KeyGui:Destroy()
        
        
        local ScreenGui = Instance.new("ScreenGui")
        ScreenGui.Name = "IRON_HUB_UI"
        ScreenGui.ResetOnSpawn = false
        ScreenGui.Parent = game:GetService("CoreGui")

        local Frame = Instance.new("Frame")
        Frame.Size = UDim2.new(0, 250, 0, 180)
        Frame.Position = UDim2.new(0.5, -125, 0.5, -90)
        Frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
        Frame.BorderSizePixel = 0
        Frame.Parent = ScreenGui
        Frame.Active = true
        Frame.Draggable = true

        local TitleBar = Instance.new("Frame")
        TitleBar.Size = UDim2.new(1,0,0,30)
        TitleBar.Position = UDim2.new(0,0,0,0)
        TitleBar.BackgroundColor3 = Color3.fromRGB(50,50,50)
        TitleBar.Parent = Frame

        local Title = Instance.new("TextLabel")
        Title.Size = UDim2.new(1,-60,1,0)
        Title.Position = UDim2.new(0,0,0,0)
        Title.BackgroundTransparency = 1
        Title.Text = "IRON HUB"
        Title.TextColor3 = Color3.fromRGB(255,255,255)
        Title.TextScaled = true
        Title.Parent = TitleBar

        local CloseBtn = Instance.new("TextButton")
        CloseBtn.Size = UDim2.new(0,60,1,0)
        CloseBtn.Position = UDim2.new(1,-60,0,0)
        CloseBtn.BackgroundColor3 = Color3.fromRGB(200,50,50)
        CloseBtn.Text = "X"
        CloseBtn.TextColor3 = Color3.fromRGB(255,255,255)
        CloseBtn.Parent = TitleBar

        CloseBtn.MouseButton1Click:Connect(function()
            ScreenGui:Destroy()
        end)

        
        local FOVEnabled = false
        local FOVRadius = 120
        local Smoothness = 0.1

        
        local AimToggle = Instance.new("TextButton")
        AimToggle.Size = UDim2.new(0,100,0,30)
        AimToggle.Position = UDim2.new(0,10,0,40)
        AimToggle.BackgroundColor3 = Color3.fromRGB(100,100,100)
        AimToggle.Text = "AimLock: OFF"
        AimToggle.TextColor3 = Color3.fromRGB(255,255,255)
        AimToggle.Parent = Frame

        AimToggle.MouseButton1Click:Connect(function()
            FOVEnabled = not FOVEnabled
            AimToggle.Text = FOVEnabled and "AimLock: ON" or "AimLock: OFF"
        end)

        
        local FOVLabel = Instance.new("TextLabel")
        FOVLabel.Size = UDim2.new(0,100,0,20)
        FOVLabel.Position = UDim2.new(0,10,0,80)
        FOVLabel.Text = "FOV: "..FOVRadius
        FOVLabel.TextColor3 = Color3.fromRGB(255,255,255)
        FOVLabel.BackgroundTransparency = 1
        FOVLabel.Parent = Frame

        
        local SmoothLabel = Instance.new("TextLabel")
        SmoothLabel.Size = UDim2.new(0,100,0,20)
        SmoothLabel.Position = UDim2.new(0,10,0,130)
        SmoothLabel.Text = "Smooth: "..Smoothness
        SmoothLabel.TextColor3 = Color3.fromRGB(255,255,255)
        SmoothLabel.BackgroundTransparency = 1
        SmoothLabel.Parent = Frame

        
        local Players = game:GetService("Players")
        local RunService = game:GetService("RunService")
        local Camera = workspace.CurrentCamera
        local LocalPlayer = Players.LocalPlayer

        local function GetClosestEnemy()
            local closestDist = FOVRadius
            local target = nil
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
                    if player.Team ~= LocalPlayer.Team then
                        local screenPos, onScreen = Camera:WorldToViewportPoint(player.Character.Head.Position)
                        if onScreen then
                            local dist = (Vector2.new(screenPos.X, screenPos.Y) - Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)).Magnitude
                            if dist < closestDist then
                                closestDist = dist
                                target = player.Character.Head
                            end
                        end
                    end
                end
            end
            return target
        end

        RunService.RenderStepped:Connect(function()
            if FOVEnabled then
                local target = GetClosestEnemy()
                if target then
                    local direction = (target.Position - Camera.CFrame.Position).Unit
                    local targetCFrame = CFrame.new(Camera.CFrame.Position, Camera.CFrame.Position + direction)
                    Camera.CFrame = Camera.CFrame:Lerp(targetCFrame, Smoothness)
                end
            end
        end)

    else
        
        KeyBox.Text = ""
        KeyBox.PlaceholderText = "Wrong Key!"
    end
end)
